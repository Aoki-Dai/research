# マッチング処理比較レポート: Word2Vec vs Word2Vec + IDF

本レポートでは、Word2Vecのみを用いたマッチング処理（Wikiモデル）と、Word2VecにIDF（Inverse Document Frequency）による重み付けを加えたマッチング処理の結果を比較・評価します。

## 1. 概要

IDF重み付けの導入により、**一般的な単語（ストップワードに近い語）の影響を低減し、より特徴的な単語を重視したマッチング**が行われることが期待されます。
比較の結果、両者のスコアには高い相関が見られるものの、**トップランクの候補者には約50%の入れ替わり**が発生しており、IDFがランキングに大きな影響を与えていることが確認されました。

## 2. 統計的比較

### 基本統計量 (Similarity Score)

| 指標 | Word2Vec + IDF | Word2Vec (Wiki) | 考察 |
|---|---|---|---|
| **平均値** | **0.9037** | 0.9212 | IDFにより全体的にスコアが低下。一般的な単語による「なんとなくの一致」が抑制された可能性があります。 |
| **中央値** | 0.9084 | 0.9245 | 同様に低下傾向。 |
| **標準偏差** | 0.0272 | 0.0217 | IDFの方がスコアのばらつき（分散）が大きく、候補者間の差がより明確になっています。 |

### 相関と分布

*   **相関係数**: **0.9237**
    *   非常に強い正の相関があり、基本的なマッチングの傾向は維持されています。
*   **Top 10 候補者の一致率 (Jaccard係数)**: **0.5145**
    *   **重要**: プロジェクトごとのTop 10候補者のうち、両方の手法で共通して選ばれたのは約半数のみです。残りの半数は手法によって入れ替わっています。

## 3. ランク変動の具体例

プロジェクト「旅行予約システム設計」(Role: QAエンジニア) におけるTop 5候補者（IDF基準）の比較：

| Rank (IDF) | User ID | Score (IDF) | Rank (Wiki) | Score (Wiki) | 変動 |
|---|---|---|---|---|---|
| 1 | 259 | 0.8995 | 1 | 0.9217 | 維持 |
| 2 | 258 | 0.8964 | 圏外* | - | **大きく上昇** |
| 3 | 197 | 0.8957 | 2 | 0.9213 | 1ランクダウン |
| 4 | 66 | 0.8954 | 3 | 0.9199 | 1ランクダウン |
| 5 | 283 | 0.8945 | 6 | 0.9184 | 1ランクアップ |

*\*圏外: Wiki側のデータセット（おそらくTop K抽出）に含まれていないため、ランクが大幅に低いか、選外となっています。*

**考察**:
User 258は、Word2Vec単体では上位（Top 10圏内など）に入っていなかった可能性がありますが、IDF重み付けによって「プロジェクト固有の重要なキーワード」がマッチし、2位まで急上昇しました。これはIDFが**ニッチだが重要なスキルや経験**を拾い上げている可能性を示唆します。

## 4. 考察・課題・改善策

### 4.1 考察 (Discussion)

*   **「隠れた人材」の発掘**:
    *   User 258の例（圏外→2位）が示すように、IDFは一般的な用語で埋もれがちな「そのプロジェクトに特有のスキル」を持つ候補者を救い上げる効果があります。これは、単純なキーワードマッチングや平均的なベクトル類似度では見落とされがちな人材を発見できる可能性を示唆しています。
*   **スコアの適正化**:
    *   全体的なスコア低下は、マッチングの厳密性が増したことの裏返しと言えます。全ての候補者が「なんとなく似ている」状態から、よりメリハリのある評価へとシフトしています。

### 4.2 課題 (Issues)

*   **絶対値としてのスコアの高さ**:
    *   IDF適用後も平均スコアは0.90を超えており、依然として全体的に高い類似度が出ています。これはWord2Vecモデル自体の学習データや次元数、あるいは「全ての単語が何らかの関連性を持つ」という分散表現の特性に起因する可能性があります。0.90と0.91の差が実務上どれほど意味があるのか、閾値設計が難しい点が課題です。
*   **定性的な妥当性の検証**:
    *   ランキングが大きく変動しましたが、「IDFで上位に来た人が本当に優秀なマッチングなのか」は、実際の職務経歴書や面談結果と照らし合わせる定性的な評価（Human-in-the-loop）が必要です。
*   **過剰なペナルティのリスク**:
    *   頻出語（例: "開発", "経験"）の重みを下げすぎると、必須だが一般的なスキルの評価が軽視されるリスクがあります。

### 4.3 改善策 (Improvements)

1.  **ハイブリッド・マッチングの導入**:
    *   ベクトル類似度（意味的マッチング）だけでなく、**明示的なスキルタグの一致数**や**経験年数**などのハードフィルタを組み合わせることで、スコアの信頼性を補完する。
2.  **モデルの高度化**:
    *   単語ベクトルの平均（Word2Vec）ではなく、文脈を考慮できる**SBERT (Sentence-BERT)** や、よりドメインに特化した学習済みモデル（例: 日本語Wikipediaだけでなく、技術文書で学習したモデル）の利用を検討する。
3.  **IDFのチューニング**:
    *   ストップワードリストの拡充や、IDF値の下限設定（極端に低い重みの単語を無視するなど）を行い、ノイズ除去の精度を向上させる。
4.  **フィードバックループの構築**:
    *   実際の採用担当者による「Good/Bad」のフィードバックデータを蓄積し、それを教師データとしてランキング学習（Learning to Rank）に適用する。

## 5. 結論

1.  **ノイズの低減**: IDF重み付けにより、全体的な類似度スコアが低下しました。これは、多くのドキュメントに現れる一般的な単語の寄与度が下がったためと考えられ、より意味のある一致がスコアに反映されていると推測されます。
2.  **ランキングの刷新**: Top 10候補者の約半数が入れ替わるという結果は、IDF導入が単なるスコア調整にとどまらず、**人材推薦の質的変化**をもたらしていることを示しています。
3.  **推奨**: 特徴的なスキルや経験を重視したいケースでは、IDF重み付け（またはそれを含む手法）の利用が強く推奨されます。

---
*データソース:*
*   `outputs/matching_results_idf.csv`
*   `outputs/matching_results_wiki.csv`
